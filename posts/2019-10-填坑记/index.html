<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">

    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        <title>配置环境小记</title>

        <link rel="stylesheet" href="../../fonts/Serif/cmun-serif.css" />
        <link rel="stylesheet" href="../../fonts/Serif-Slanted/cmun-serif-slanted.css" />

        <!--BOOTSTRAP-->
        <link href="../../bootstrap/css/bootstrap.min.css" rel="stylesheet">
        <!--mobile first-->
        <meta name="viewport" content="width=device-width, initial-scale=1.0">

        <!--removed html from url but still is html-->
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

        <!--font awesome-->
        <link href="//netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css" rel="stylesheet">

        <!--fonts: allan & cardo-->
        <link href="http://fonts.googleapis.com/css?family=Droid+Serif" rel="stylesheet" type="text/css">
        <link href="http://fonts.googleapis.com/css?family=Droid+Sans" rel="stylesheet" type="text/css">

        <link href="../../css/sticky-footer-navbar.css" rel="stylesheet">

        <link href="../../css/default.css" rel="stylesheet">

        <link href="../../comments/inlineDisqussions.css" rel="stylesheet">

        <!--Highlight-->
        <link href="../../highlight/styles/github.css" rel="stylesheet">

        <link href="../../favicon.ico" rel="shortcut icon" />

        <!--<script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>-->
        <script type="text/javascript" src="//cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

        <style>
        .post{width:170px;min-height:175px;padding-left:5px;padding-right:5px;float:left;border-left:1px solid #CCC;background-color:white;}
        div a:first-of-type .post { border-left: none; }
        .post:hover {filter: brightness(90%);}
        .post h3{margin:5px;font-size:75%;text-align:center}
        .post h4{margin:0px;font-size:50%;text-align:center}
        .post img{margin:0px;padding:2px;margin-bottom:10px;width:100%;height:155px}
        </style>

        <script>
          (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
          (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
          m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
          })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

          ga('create', 'UA-49811703-1', 'dwHou.github.io');
          ga('require', 'linkid', 'linkid.js');
          ga('require', 'displayfeatures');
          ga('send', 'pageview');

        </script>

    </head>

    <body>
        <div id="wrap">
            <nav class="navbar navbar-inverse navbar-static-top" role="navigation">
                <div class="container">
                    <!--Toggle header for mobile-->
                    <div class="navbar-header">
                        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                            <span class="sr-only">Toggle navigation</span>
                            <span class="icon-bar"></span>
                            <span class="icon-bar"></span>
                            <span class="icon-bar"></span>
                        </button>
                        <a class="navbar-brand active" href="../../" style="font-size:20px;">De's blog</a>
                    </div>
                    <!--normal header-->
                    <div class="navbar-collapse collapse">
                        <ul class="nav navbar-nav navbar-right">
                            <li><a href="../../"><span class="glyphicon glyphicon-pencil"></span>  Blog</a></li>
                            <li><a href="../../about.html"><span class="glyphicon glyphicon-user"></span>  About</a></li>
                            <li><a href="../../contact.html"><span class="glyphicon glyphicon-envelope"></span>  Contact</a></li>
                        </ul>
                    </div><!--/.nav-collapse -->
                </div>
            </nav>


            <div id="content">
                <div class="container">
                    <div class="row">
                        <div class="col-md-8">
                            <h1>配置环境填坑小记</h1>
                            <div style="font-size: 170%;">方法永远比困难多</div>
                            <br>
                            <div class="info">
    <p style="font-family:CMSS; font-size:120%">Posted on January 21, 2019</p>

    <!--
        by dwHou
    -->
</div>
</br>



 



  <p>
    计算机科学除了有丰富的理论内涵，也是一门锻炼工程能力的实践科学，<i>填坑力</i> 就成为了解决问题的能力中一个重要的方面。
    类似医院里的实习医师、法庭内外的年轻律师、中学里的青年教师，ta们的能力同样是在不断的实践摸索中成长的。要学会投入工作，
    加入自己的思考，不断填坑又爬坑逐渐掌握无可替代的经验和能力。计算机的专家也是在坐得住地debug中、不断参与比赛、解决项目中，
    成长为能写出bug-free clean and elegant的代码。理论和实践，都值得投入学习取得进步。
  </p>

  
  <h2>安装多版本CUDA时</h2>

  <style>
    ul li {
      margin-top: 12px;
    }

    .tight-list li {
      margin-top: 6px;
    }
  </style>

  <ul>
  <li><b>历史版本</b> cuda https://developer.nvidia.com/cuda-toolkit-archive cudnn https://developer.nvidia.com/rdp/cudnn-archive </li>
  <li><b>多版本</b> https://blog.csdn.net/Tesion_001/article/details/89737044 </li>
    
  </ul>
    

  <h2>Linux更改用户环境变量和所有用户环境变量</h2>


  <ul>

  <li><b>创建用户</b> https://www.cnblogs.com/sunyllove/p/9772053.html </li>
  <li><b>修改用户环境</b> https://blog.csdn.net/weixin_38361347/article/details/93392842 </li>
  <li><b>具体修改CUDA环境</b> https://blog.csdn.net/Tesion_001/article/details/89737044 </li>
  

  </ul>


  <h2>安装CUDA</h2>

  
    去官网，会生成所需版本的安装命令，如：
    <p><i>wget http://developer.download.nvidia.com/compute/cuda/10.1/Prod/local_installers/cuda_10.1.243_418.87.00_linux.run</i></p>
    <p><i>sudo sh cuda_10.1.243_418.87.00_linux.run</i></p>
    <p><div align="left">附1：<font color="#FF9797">CUDA对应的NVIDIA驱动版本对照表</font></div> https://blog.csdn.net/zhw864680355/article/details/90411288</p>
    <p>附2：看看别人的填坑记 https://blog.csdn.net/QLULIBIN/article/details/78714596</p>
    <p>注1：配置环境一般考虑较新的稳定版，而不是追求最新。版本还可以再更新，而不要现在去冒着driver、toolkit、platform兼容上的风险。</p>
 



  <h2>TensorFlow安装</h2>

  <p>
    通常和CUDA版本安装一起考虑。
  </p>

  <ul>
  <li><b>tensorflow for windows</b>
  <p>https://www.cnblogs.com/xianhan/p/9084815.html</p>
  <p>https://www.cnblogs.com/guoyaohua/p/9265268.html</p>
  <p>https://blog.csdn.net/gyp2448565528/article/details/79451212</li></p>


  </ul>

  <h2>PyTorch奇怪的报错</h2>
    RuntimeError: cuDNN error: CUDNN_STATUS_NOT_SUPPORTED.
    This error may appear if you passed in a non-contiguous input.
  <ul>
      <li>
          原因：版本不匹配
      </li>
      <li>
          解决方法：
          使用torch.backends.cudnn.enabled = False
      </li>
  </ul>


  <h2>anaconda</h2>

  <li><b>安装与配置</b> https://www.jb51.net/article/137772.htm</li>
   <li><b>jupyter快捷键</b> https://blog.csdn.net/HeatDeath/article/details/78030902</li>
   <li><b>jupyter魔法命令</b> https://blog.csdn.net/HeatDeath/article/details/78030902</li>
   <li><b>jupyter启动默认设置</b> https://blog.csdn.net/m0_37723350/article/details/89141276</li>
   <li>如果想从指定目录打开 命令时jupyter notebook + 路径即可</li>
   <li><b>如何翻墙访问云端的jupyter端口</b> 把远端端口映射到本地，浏览器可以本地打开：ssh -L 8008:localhost:8888 用户名@IP  就可以本地8008端口打开云端jupyter notebook.</li>
   <li>https://www.jianshu.com/p/013a95576cf6</li>
  </ul>


  <h2>nvidia断电驱动崩溃</h2>
  <ul>
    <li><b>驱动卸载重装</b> https://blog.csdn.net/Netooo/article/details/84888755</li>
    <li>记得chmod赋予run文件执行的权限</li>
  </ul>
  
  <h2>关于调试</h2>
  <ul>
    <li><b>|tee log.txt</b> 可以将终端内容输出记录到文本</li>
    <li><b>Compare</b> IDE中 Select for Compare & Compare with Selected</li>
  </ul>

  <h2>关于OpenCV</h2>
  <ul>
      <li>PIP3依赖有：opencv-python-headless, opencv-python, opencv-contrib-python</li>
      <li>这三者在完整性上是递增的，常用的opencv-python，如果你的环境报错缺少libSM，这是图形界面的库，
      如果你的环境不需要，可以把opencv-python的依赖改成opencv-python-headless。如果要用一些有专利
      收费的算法，则使用opencv-contrib-python.
      </li>
      <li>Of course there is opencv-contrib-python-headless</li>
  </ul>

  <h2>nvidia-smi显存被占用,却没显示进程</h2>
  <ul>
      <li>使用fuser命令</li>
      fuser用于显示哪些进程正在使用给定的文件、文件系统或unix套接字
      <li>fuser -v /dev/nvidia*</li>
      查看占用指定显卡的进程id之后，kill掉就好了
      <li>kill -9 PID</li>
  </ul>

  <h2>远程终端标准输出的恢复</h2>
  如果使用<font color="red">tmux</font>、<a href="https://www.jianshu.com/p/26cf6f0c6801">screen</a>、supervisor，它们有进程托管的功能可以很好的恢复。但关闭普通的远程终端，如何恢复标准输出呢？
  <li><a href="https://blog.csdn.net/mountzf/article/details/51735691">tty/pts详解</a> </li>
  <li>先ps ef找到进程号PID，这时也能看到TTY(与进程关联的终端),STAT是检查的状态R运行，S睡眠，l空闲。</li>
  <li>首先找到进程号，然后获取进程的标准输出。linux一切到可以看作文件，/proc/pid/fd/1 就是pid进程的标准输出。</li>
  Maybe these schema can clarify the situation. This is the usual setting:
  <pre>
      Terminal  (/dev/ttyX or /dev/pts/x)
                                device
                                   |
                    (screen)<--[<output]----x-------(stdout) Process1
        Terminal  (keyboard)---[input >]---o-\----->(stdin)
                                            \ \
(hardware console or                         \ `----(stdout) Process2
 virtual console or terminal                  `---->(stdin)
 emulators like xterm, …)
  </pre>
  And there is no way to plug some new Process3 like this:
  <pre>
      Terminal
                              device
                                 |
             (screen)<---o---[<output]--x------(stdout) Process1
  Terminal (keyboard)---/-x--[input >]-o-\---->(stdin)
                       | /              \ \
                       | |               \ `---(stdout) Process2
                       | |                `--->(stdin)
                       | |
                       \ `---------------------(stdout) Process3
                        `--------------------->(stdin)
  </pre>
  What screen (and others) does is allocating some pseudo terminal device (like xterm does)
  and redirect it to one or more "real" terminals (physical, virtual, or emulated):
  <pre>
      Terminal                   pseudo
             devices              ,--> Terminal (/dev/pts/x)
                |         _______/      device
Terminal <--[<output]--- |       |        |
 1       ---[input >]--> |screen | <--[<output]---x-----(stdout) Process1
                         |Process| ---[input >]--o-\--->(stdin)
Terminal <--[<output]--- |       |                \ \
 2       ---[input >]--> |_______|                 \ `--(stdout) Process2
                                                    `-->(stdin)
  </pre>
  Using screen -x you can attach one more terminal, xterm, whatever (say Terminal 3) to the screen session.<br>
  So no, you can't communicate directly through stdin/stdout with processes attached to a different terminal.
  You can only do so through the process that is controlling this terminal if it happens to be a pseudo terminal,
  and if this process was concieved to do so (like screen is).
  https://unix.stackexchange.com/questions/17838/how-can-i-switch-between-ttys-without-using-screen
  <li>
      所以最好是使用tmux:<br>
      The simple answer is that if you want to reconnect to a terminal from a different place, use screen or tmux.
  </li>

  <h2>磁盘推出</h2>
  <ul>
  <li>磁盘没有被推出，因为一个或多个程序可能正在使用它。</li>
      <pre>
          df -lh 查看硬盘编号，如/dev/disk2s1

          lsof /Volumes/Seagate/

          打开活动监视器 Activity Monitor，找到 QuickLook，强制退出
          如果 lsof /Volumes/Seagate/ 没有输出的话，加上 sudo 再执行 sudo lsof /Volumes/Seagate/，
          估计会发现是 mds 和 mds_store 在后台搞鬼, 这两个是 SpotLight 的进程，强退之！
      </pre>
      <li> lsof : lists openfiles 列出打开文件。 <font color="red">注：</font>在Unix中一切（包括网络套接口）都是文件。</li>
  </ul>

<!-- 加载出评论，是使用Disqus的论坛短名（shortname）
A shortname is the unique identifier assigned to a Disqus site. 

https://segmentfault.com/a/1190000005773009
https://help.disqus.com/en/articles/1717111-what-s-a-shortname
https://blog.csdn.net/weixin_34327761/article/details/89630337
   -->

<div id="disqus_thread"></div>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
<script src="http://code.jquery.com/jquery-1.10.1.min.js"></script>

<script src="../../comments/inlineDisqussions.js"></script>
<script src="../../js/disqus.js"></script>

                        </div>
                        <div class="col-md-4"></div>
                    </div>
                </div>
            </div>


            <div id="footer">
                <div class="container">
                    Built by <a href="https://github.com/oinkina">Oinkina</a> with
                    <a href="http://jaspervdj.be/hakyll">Hakyll</a>
                    using <a href="http://getbootstrap.com/">Bootstrap</a>,
                    <a href="http://www.mathjax.org/">MathJax</a>,
                    <a href="http://disqus.com/">Disqus</a>,
                    <a href="https://github.com/unconed/MathBox.js">MathBox.js</a>,
                    <a href="http://highlightjs.org/">Highlight.js</a>,
                    and <a href="http://ignorethecode.net/blog/2010/04/20/footnotes/">Footnotes.js</a>.
                </div>
            </div>
        </div>

    <!-- jQuery-->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
    <script src="http://code.jquery.com/jquery-1.10.1.min.js"></script>

    <script src="../../bootstrap/js/bootstrap.min.js"></script>

    <script src="../../highlight/highlight.pack.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>

    <script src="../../js/footnotes.js"></script>

    <script src="../../comments/inlineDisqussions.js"></script>

    <noscript>Enable JavaScript for footnotes, Disqus comments, and other cool stuff.</noscript>

    </body>

</html>
